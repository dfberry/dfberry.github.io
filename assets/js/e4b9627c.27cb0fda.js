"use strict";(self.webpackChunkdocusaurus_blog_with_search=self.webpackChunkdocusaurus_blog_with_search||[]).push([[9677],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>h});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},u=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),c=p(a),m=r,h=c["".concat(s,".").concat(m)]||c[m]||d[m]||o;return a?n.createElement(h,l(l({ref:t},u),{},{components:a})):n.createElement(h,l({ref:t},u))}));function h(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,l=new Array(o);l[0]=m;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[c]="string"==typeof e?e:r,l[1]=i;for(var p=2;p<o;p++)l[p]=a[p];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},1339:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>d,frontMatter:()=>o,metadata:()=>i,toc:()=>p});var n=a(7462),r=(a(7294),a(3905));const o={slug:"/2025-12-30-github-account-clean.md",canonical_url:"https://dfberry.github.io/blog/2025-12-30-github-account-clean.md",custom_edit_url:null,sidebar_label:"2025-12-30 GitHub account cleanup",title:"GitHub Account Cleanup: Audit, Archive & Remove Stale Repos",description:"Automate a safe GitHub account cleanup: archive stale repos, delete empty repos, remove forks, and generate a publishable repo catalog \u2014 dry-run first.",published:!1,tags:["GitHub","repo-cleanup","audit","developer-tools"],updated:"2024-04-07 00:00 PST"},l="Clean up my many GitHub account repositories",i={permalink:"/2025-12-30-github-account-clean.md",source:"@site/blog/2025-12-30-github-account-clean.md",title:"GitHub Account Cleanup: Audit, Archive & Remove Stale Repos",description:"Automate a safe GitHub account cleanup: archive stale repos, delete empty repos, remove forks, and generate a publishable repo catalog \u2014 dry-run first.",date:"2025-12-30T00:00:00.000Z",formattedDate:"December 30, 2025",tags:[{label:"GitHub",permalink:"/tags/git-hub"},{label:"repo-cleanup",permalink:"/tags/repo-cleanup"},{label:"audit",permalink:"/tags/audit"},{label:"developer-tools",permalink:"/tags/developer-tools"}],readingTime:3.91,hasTruncateMarker:!1,authors:[],frontMatter:{slug:"/2025-12-30-github-account-clean.md",canonical_url:"https://dfberry.github.io/blog/2025-12-30-github-account-clean.md",custom_edit_url:null,sidebar_label:"2025-12-30 GitHub account cleanup",title:"GitHub Account Cleanup: Audit, Archive & Remove Stale Repos",description:"Automate a safe GitHub account cleanup: archive stale repos, delete empty repos, remove forks, and generate a publishable repo catalog \u2014 dry-run first.",published:!1,tags:["GitHub","repo-cleanup","audit","developer-tools"],updated:"2024-04-07 00:00 PST"},nextItem:{title:"Deploy an Azure Functions app from a monorepo with a GitHub Action for Node.js",permalink:"/2024-04-07-mono-repo-functions.md"}},s={authorsImageUrls:[]},p=[{value:"Functionality included in GitHub account cleanup",id:"functionality-included-in-github-account-cleanup",level:2},{value:"High level architecture",id:"high-level-architecture",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Install and build dependencies",id:"install-and-build-dependencies",level:2},{value:"Try out the tool",id:"try-out-the-tool",level:2},{value:"Full run",id:"full-run",level:2},{value:"AI-assisted development",id:"ai-assisted-development",level:2},{value:"Next steps",id:"next-steps",level:2}],u={toc:p},c="wrapper";function d(e){let{components:t,...o}=e;return(0,r.kt)(c,(0,n.Z)({},u,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"My end of year project is a GitHub account repository-cleanup tool to provide safe, repeatable auditing and cleanup for my GitHub accounts. I also wanted to create a catalog of my active repos. This repo focuses on repository-level cleanup (archive/delete/catalog), but the same audit run can help you discover candidates for cloud-resource reclamation and CI/workflow maintenance."),(0,r.kt)("p",null,"When to use this project"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Periodic account maintenance (end-of-year or scheduled audits)."),(0,r.kt)("li",{parentName:"ul"},"Before publishing a portfolio or transferring repositories."),(0,r.kt)("li",{parentName:"ul"},"When you want a reproducible audit with a dry-run-first approach.")),(0,r.kt)("h2",{id:"functionality-included-in-github-account-cleanup"},"Functionality included in GitHub account cleanup"),(0,r.kt)("p",null,"My ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/dfberry/gh"},"TypeScript project")," cleans up my account in the following way:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Archive stale repositories, "),(0,r.kt)("li",{parentName:"ul"},"Detect and delete empty repositories, "),(0,r.kt)("li",{parentName:"ul"},"Remove forks, "),(0,r.kt)("li",{parentName:"ul"},"Generate repo descriptions and topics with LLM and update repos with that info,"),(0,r.kt)("li",{parentName:"ul"},"Generate a catalog of active repos for publishing.")),(0,r.kt)("h2",{id:"high-level-architecture"},"High level architecture"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"1- primary entry is `scripts/run-all.sh` 2- workflows are optional 3- gh-cleanup calls github-rest and llm-completion 4- outputs go to generated/",src:a(2990).Z,width:"2469",height:"1815"})),(0,r.kt)("p",null,"The high-level architecture of the npm workspace monorepo: "),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"packages/gh-cleanup")," \u2014 CLI commands and orchestration: categorization rules, scoring, reporting, and the runner that coordinates dry-run and apply flows."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"packages/github-rest")," \u2014 GitHub REST helpers, typed endpoint wrappers, and shared network utilities. "),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"packages/llm-completion")," \u2014 LLM/AI utilities: prompt helpers, request wrappers, retries, and response sanitization used by the describe step."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"generated/")," \u2014 Example outputs created by dry-run executions: ",(0,r.kt)("inlineCode",{parentName:"li"},"catalog.md"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"active.json"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"descriptions.json"),", summaries, etc."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},".github")," - Workflows and prompt files. "),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"scripts")," - Top level script to clean up GitHub account, also used by ")),(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"This repo can be opened with Codespaces or locally with ",(0,r.kt)("inlineCode",{parentName:"p"},".devcontainer/devcontainer.json"),". The development container has all the developer setup for this project including Node.js. Once you have the repo open with the environment, create a GitHub token and an OpenAI key and an LLM model. Set these values in the root level ",(0,r.kt)("inlineCode",{parentName:"p"},".env"),"."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"A GitHub token in ",(0,r.kt)("inlineCode",{parentName:"li"},"GH_TOKEN")," (classic PAT with ",(0,r.kt)("inlineCode",{parentName:"li"},"repo")," scopes; ",(0,r.kt)("inlineCode",{parentName:"li"},"delete_repo")," only required for destructive operations such as deleting a repo.)"),(0,r.kt)("li",{parentName:"ul"},"OpenAI key for LLM generation of repo descriptions and topics and an LLM model. I used 4.1-mini from Azure OpenAI.")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ini"},"GH_TOKEN=\nGH_USER=YOUR_GITHUB_USER_ACCOUNT\nOPENAI_API_KEY=\nOPENAI_ENDPOINT=https://RESOURCE-NAME.openai.azure.com/openai/deployments/MODEL_NAME/chat/completions?api-version=API_VERSION\nOPENAI_MODEL=gpt-4.1-mini\nOPENAI_TEMPERATURE=0.2\n")),(0,r.kt)("h2",{id:"install-and-build-dependencies"},"Install and build dependencies"),(0,r.kt)("p",null,"The root ",(0,r.kt)("inlineCode",{parentName:"p"},"package.json")," uses npm workspaces to control and access all the packages in ",(0,r.kt)("inlineCode",{parentName:"p"},"./packages"),". Use the root ",(0,r.kt)("inlineCode",{parentName:"p"},"package.json")," scripts to install and build the tool."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm install\nnpm run build\n")),(0,r.kt)("h2",{id:"try-out-the-tool"},"Try out the tool"),(0,r.kt)("p",null,"One-line run examples"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Remove forks (dry-run):"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm run start -w gh-cleanup -- remove-forks\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Archive stale repos older than a year (dry-run):"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm run start -w gh-cleanup -- archive-stale-repos\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Delete empty repos, no PRs, no commits, size is 0 KB (dry-run):"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm run start -w gh-cleanup -- delete-empty-repos\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Categorize repos (fetch languages + README, output Markdown):"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm run start -w gh-cleanup -- categorize-repos --fetch --output=md --out=generated/catalog.md\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Summary (write ",(0,r.kt)("inlineCode",{parentName:"p"},"generated/summary.md"),"):"),(0,r.kt)("p",{parentName:"li"},"This creates the final active list of repos in a markdown table. I'll use this in my dfberry.github.io website to find projects with specific code, configuration, or CI."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm run start -w gh-cleanup -- summary --summary-out=generated/summary.md\n")))),(0,r.kt)("h2",{id:"full-run"},"Full run"),(0,r.kt)("p",null,"Once you understand what the tool does, use the ",(0,r.kt)("inlineCode",{parentName:"p"},"./scripts/run-all.sh")," to clean up your GitHub account. I used my personal ",(0,r.kt)("inlineCode",{parentName:"p"},"dfberry")," account to test while building. Now that it is complete, I'll use it on my work ",(0,r.kt)("inlineCode",{parentName:"p"},"diberry")," account for Microsoft. "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm run run-all:apply\n")),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"apply")," means empty repos are deleted and active repos are updated for description and topics. "),(0,r.kt)("h2",{id:"ai-assisted-development"},"AI-assisted development"),(0,r.kt)("p",null,"I use AI tools (Copilot, Ask/Plan/Agent) to speed development while keeping human oversight. I commit frequently and review AI suggestions line-by-line. Choose models and session types (local, background, cloud) deliberately to control cost and behavior. Never let AI run unattended on critical changes\u2014use dry runs and manual tests. I scaffold the repo, add features incrementally, and document decisions so I can return later. Copilot helps with comments and diagrams, but I always review and adjust its output."),(0,r.kt)("h2",{id:"next-steps"},"Next steps"),(0,r.kt)("p",null,"Cleanup goes beyond removing unused repositories. When tidying a personal or org GitHub account you may also:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Reclaim unused cloud resources referenced by projects (e.g., old deployments, test clusters, or storage buckets)."),(0,r.kt)("li",{parentName:"ul"},"Remove or archive unused repositories that are forks, abandoned, or no longer relevant."),(0,r.kt)("li",{parentName:"ul"},"Find and fix failing or stale GitHub Actions workflows (update action versions or workflow syntax) or remove workflows that are no longer useful."),(0,r.kt)("li",{parentName:"ul"},"Update CI matrices and runtimes (programming language versions, OS matrix entries) to reduce CI cost and avoid testing very-old combinations."),(0,r.kt)("li",{parentName:"ul"},"Bump pinned GitHub Action versions and dependencies to address deprecations and security fixes.")))}d.isMDXComponent=!0},2990:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/architecture-d27d728f72f3abda98609e3f0932ad3e.png"}}]);