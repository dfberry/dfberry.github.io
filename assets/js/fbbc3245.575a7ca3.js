"use strict";(globalThis.webpackChunkdocusaurus_blog_with_search=globalThis.webpackChunkdocusaurus_blog_with_search||[]).push([[3444],{747(e){e.exports=JSON.parse('{"permalink":"/2025-12-30-github-account-clean.md","source":"@site/blog/2025-12-30-github-account-clean.md","title":"GitHub Account Cleanup: Audit, Archive & Remove Stale Repos","description":"Automate a safe GitHub account cleanup: archive stale repos, delete empty repos, remove forks, and generate a publishable repo catalog \u2014 dry-run first.","date":"2025-12-30T00:00:00.000Z","tags":[{"inline":true,"label":"GitHub","permalink":"/tags/git-hub"},{"inline":true,"label":"repo-cleanup","permalink":"/tags/repo-cleanup"},{"inline":true,"label":"audit","permalink":"/tags/audit"},{"inline":true,"label":"developer-tools","permalink":"/tags/developer-tools"}],"readingTime":4.08,"hasTruncateMarker":false,"authors":[],"frontMatter":{"slug":"/2025-12-30-github-account-clean.md","canonical_url":"https://dfberry.github.io/blog/2025-12-30-github-account-clean.md","custom_edit_url":null,"sidebar_label":"2025-12-30 GitHub account cleanup","title":"GitHub Account Cleanup: Audit, Archive & Remove Stale Repos","description":"Automate a safe GitHub account cleanup: archive stale repos, delete empty repos, remove forks, and generate a publishable repo catalog \u2014 dry-run first.","published":false,"tags":["GitHub","repo-cleanup","audit","developer-tools"],"updated":"2024-04-07 00:00 PST"},"unlisted":false,"nextItem":{"title":"Deploy an Azure Functions app from a monorepo with a GitHub Action for Node.js","permalink":"/2024-04-07-mono-repo-functions.md"}}')},3819(e,n,t){t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>c});var s=t(747),i=t(4848),r=t(8453);const a={slug:"/2025-12-30-github-account-clean.md",canonical_url:"https://dfberry.github.io/blog/2025-12-30-github-account-clean.md",custom_edit_url:null,sidebar_label:"2025-12-30 GitHub account cleanup",title:"GitHub Account Cleanup: Audit, Archive & Remove Stale Repos",description:"Automate a safe GitHub account cleanup: archive stale repos, delete empty repos, remove forks, and generate a publishable repo catalog \u2014 dry-run first.",published:!1,tags:["GitHub","repo-cleanup","audit","developer-tools"],updated:"2024-04-07 00:00 PST"},o="Clean up my many GitHub account repositories",l={authorsImageUrls:[]},c=[{value:"Functionality included in GitHub account cleanup",id:"functionality-included-in-github-account-cleanup",level:2},{value:"High level architecture",id:"high-level-architecture",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Install and build dependencies",id:"install-and-build-dependencies",level:2},{value:"Try out the tool",id:"try-out-the-tool",level:2},{value:"Full run",id:"full-run",level:2},{value:"AI-assisted development",id:"ai-assisted-development",level:2},{value:"Next steps",id:"next-steps",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"My end of year project is a GitHub account repository-cleanup tool to provide safe, repeatable auditing and cleanup for my GitHub accounts. I also wanted to create a catalog of my active repos. This repo focuses on repository-level cleanup (archive/delete/catalog), but the same audit run can help you discover candidates for cloud-resource reclamation and CI/workflow maintenance."}),"\n",(0,i.jsx)(n.p,{children:"When to use this project"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Periodic account maintenance (end-of-year or scheduled audits)."}),"\n",(0,i.jsx)(n.li,{children:"Before publishing a portfolio or transferring repositories."}),"\n",(0,i.jsx)(n.li,{children:"When you want a reproducible audit with a dry-run-first approach."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"functionality-included-in-github-account-cleanup",children:"Functionality included in GitHub account cleanup"}),"\n",(0,i.jsxs)(n.p,{children:["My ",(0,i.jsx)(n.a,{href:"https://github.com/dfberry/gh",children:"TypeScript project"})," cleans up my account in the following way:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Archive stale repositories,"}),"\n",(0,i.jsx)(n.li,{children:"Detect and delete empty repositories,"}),"\n",(0,i.jsx)(n.li,{children:"Remove forks,"}),"\n",(0,i.jsx)(n.li,{children:"Generate repo descriptions and topics with LLM and update repos with that info,"}),"\n",(0,i.jsx)(n.li,{children:"Generate a catalog of active repos for publishing."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"high-level-architecture",children:"High level architecture"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"1- primary entry is scripts/run-all.sh 2- workflows are optional 3- gh-cleanup calls github-rest and llm-completion 4- outputs go to generated/",src:t(7191).A+"",width:"2469",height:"1815"})}),"\n",(0,i.jsx)(n.p,{children:"The high-level architecture of the npm workspace monorepo:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"packages/gh-cleanup"})," \u2014 CLI commands and orchestration: categorization rules, scoring, reporting, and the runner that coordinates dry-run and apply flows."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"packages/github-rest"})," \u2014 GitHub REST helpers, typed endpoint wrappers, and shared network utilities."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"packages/llm-completion"})," \u2014 LLM/AI utilities: prompt helpers, request wrappers, retries, and response sanitization used by the describe step."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"generated/"})," \u2014 Example outputs created by dry-run executions: ",(0,i.jsx)(n.code,{children:"catalog.md"}),", ",(0,i.jsx)(n.code,{children:"active.json"}),", ",(0,i.jsx)(n.code,{children:"descriptions.json"}),", summaries, etc."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:".github"})," - Workflows and prompt files."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"scripts"})," - Top level script to clean up GitHub account, also used by"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsxs)(n.p,{children:["This repo can be opened with Codespaces or locally with ",(0,i.jsx)(n.code,{children:".devcontainer/devcontainer.json"}),". The development container has all the developer setup for this project including Node.js. Once you have the repo open with the environment, create a GitHub token and an OpenAI key and an LLM model. Set these values in the root level ",(0,i.jsx)(n.code,{children:".env"}),"."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["A GitHub token in ",(0,i.jsx)(n.code,{children:"GH_TOKEN"})," (classic PAT with ",(0,i.jsx)(n.code,{children:"repo"})," scopes; ",(0,i.jsx)(n.code,{children:"delete_repo"})," only required for destructive operations such as deleting a repo.)"]}),"\n",(0,i.jsx)(n.li,{children:"OpenAI key for LLM generation of repo descriptions and topics and an LLM model. I used 4.1-mini from Azure OpenAI."}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ini",children:"GH_TOKEN=\nGH_USER=YOUR_GITHUB_USER_ACCOUNT\nOPENAI_API_KEY=\nOPENAI_ENDPOINT=https://RESOURCE-NAME.openai.azure.com/openai/deployments/MODEL_NAME/chat/completions?api-version=API_VERSION\nOPENAI_MODEL=gpt-4.1-mini\nOPENAI_TEMPERATURE=0.2\n"})}),"\n",(0,i.jsx)(n.h2,{id:"install-and-build-dependencies",children:"Install and build dependencies"}),"\n",(0,i.jsxs)(n.p,{children:["The root ",(0,i.jsx)(n.code,{children:"package.json"})," uses npm workspaces to control and access all the packages in ",(0,i.jsx)(n.code,{children:"./packages"}),". Use the root ",(0,i.jsx)(n.code,{children:"package.json"})," scripts to install and build the tool."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm install\nnpm run build\n"})}),"\n",(0,i.jsx)(n.h2,{id:"try-out-the-tool",children:"Try out the tool"}),"\n",(0,i.jsx)(n.p,{children:"One-line run examples"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Remove forks (dry-run):"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm run start -w gh-cleanup -- remove-forks\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Archive stale repos older than a year (dry-run):"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm run start -w gh-cleanup -- archive-stale-repos\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Delete empty repos, no PRs, no commits, size is 0 KB (dry-run):"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm run start -w gh-cleanup -- delete-empty-repos\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Categorize repos (fetch languages + README, output Markdown):"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm run start -w gh-cleanup -- categorize-repos --fetch --output=md --out=generated/catalog.md\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Summary (write ",(0,i.jsx)(n.code,{children:"generated/summary.md"}),"):"]}),"\n",(0,i.jsx)(n.p,{children:"This creates the final active list of repos in a markdown table. I'll use this in my dfberry.github.io website to find projects with specific code, configuration, or CI."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm run start -w gh-cleanup -- summary --summary-out=generated/summary.md\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"full-run",children:"Full run"}),"\n",(0,i.jsxs)(n.p,{children:["Once you understand what the tool does, use the ",(0,i.jsx)(n.code,{children:"./scripts/run-all.sh"})," to clean up your GitHub account. I used my personal ",(0,i.jsx)(n.code,{children:"dfberry"})," account to test while building. Now that it is complete, I'll use it on my work ",(0,i.jsx)(n.code,{children:"diberry"})," account for Microsoft."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm run run-all:apply\n"})}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"apply"})," means empty repos are deleted and active repos are updated for description and topics."]}),"\n",(0,i.jsx)(n.h2,{id:"ai-assisted-development",children:"AI-assisted development"}),"\n",(0,i.jsx)(n.p,{children:"I use AI tools (Copilot, Ask/Plan/Agent) to speed development while keeping human oversight. I commit frequently and review AI suggestions line-by-line. Choose models and session types (local, background, cloud) deliberately to control cost and behavior. Never let AI run unattended on critical changes\u2014use dry runs and manual tests. I scaffold the repo, add features incrementally, and document decisions so I can return later. Copilot helps with comments and diagrams, but I always review and adjust its output."}),"\n",(0,i.jsx)(n.h2,{id:"next-steps",children:"Next steps"}),"\n",(0,i.jsx)(n.p,{children:"Cleanup goes beyond removing unused repositories. When tidying a personal or org GitHub account you may also:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Reclaim unused cloud resources referenced by projects (e.g., old deployments, test clusters, or storage buckets)."}),"\n",(0,i.jsx)(n.li,{children:"Remove or archive unused repositories that are forks, abandoned, or no longer relevant."}),"\n",(0,i.jsx)(n.li,{children:"Find and fix failing or stale GitHub Actions workflows (update action versions or workflow syntax) or remove workflows that are no longer useful."}),"\n",(0,i.jsx)(n.li,{children:"Update CI matrices and runtimes (programming language versions, OS matrix entries) to reduce CI cost and avoid testing very-old combinations."}),"\n",(0,i.jsx)(n.li,{children:"Bump pinned GitHub Action versions and dependencies to address deprecations and security fixes."}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},7191(e,n,t){t.d(n,{A:()=>s});const s=t.p+"assets/images/architecture-d27d728f72f3abda98609e3f0932ad3e.png"},8453(e,n,t){t.d(n,{R:()=>a,x:()=>o});var s=t(6540);const i={},r=s.createContext(i);function a(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);