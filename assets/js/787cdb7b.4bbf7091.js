"use strict";(globalThis.webpackChunkdocusaurus_blog_with_search=globalThis.webpackChunkdocusaurus_blog_with_search||[]).push([[1921],{5022(e,t,r){r.r(t),r.d(t,{assets:()=>p,contentTitle:()=>s,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>l});var i=r(6599),n=r(4848),o=r(8453);const a={slug:"/2023.02.04-github-graphql-commit-history-with-typescript",canonical_url:"https://dfberry.github.io/blog/2023.02.04-github-graphql-commit-history-with-typescript",custom_edit_url:null,sidebar_label:"2023.02.04 TS + GitHub GraphQL Commit history",title:"TypeScript type guard for empty JSON object",description:"Safely type through an object's type which includes an empty JSON object.",published:!0,tags:["TypeScript","type guard","GitHub","GraphQL"],updated:"2023-02-04 06:21 PST"},s="TypeScript type guard for empty JSON object",p={authorsImageUrls:[]},l=[{value:"Type guard with <code>in</code>",id:"type-guard-with-in",level:2}];function c(e){const t={a:"a",code:"code",h2:"h2",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(t.p,{children:["A commit history for a repo on GitHub can be optional, if there are no commits yet. The TypeScript SDK created by the ",(0,n.jsx)(t.a,{href:"https://www.npmjs.com/package/@graphql-codegen/cli",children:"GraphQL CodeGen"})," represents this optionality is represented with an empty object, null, or undefined. If a commit is present, its represented as a nested JSON object with more optional parameters."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-typescript",children:"declare var x:\n  {} |\n  null |\n  undefined |\n  {'a':\n      { ... more optional params }\n  }\n"})}),"\n",(0,n.jsxs)(t.p,{children:["The empty JSON object, ",(0,n.jsx)(t.code,{children:"{}"}),", is tricky in JavaScript. There are several examples of testing for an empty object but they generally don't work as type guards in TypeScript for type safety."]}),"\n",(0,n.jsxs)(t.h2,{id:"type-guard-with-in",children:["Type guard with ",(0,n.jsx)(t.code,{children:"in"})]}),"\n",(0,n.jsxs)(t.p,{children:["After asking on ",(0,n.jsx)(t.a,{href:"https://stackoverflow.com/questions/75278401/how-do-i-get-type-target-history-from-github-graphql-on-defaultbranchref",children:"StackOverlow"})," and getting no response, I reached out to my local TypeScript expert for help."]}),"\n",(0,n.jsxs)(t.p,{children:["He helped boil the issue down to the type shown in the previous code block with a type guard using the ",(0,n.jsx)(t.code,{children:"in"})," keyword:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-typescript",children:"if (x !== null && x !== undefined && \"a\" in x) {\n  // no null\n  // not undefined\n  // x has property 'a' so it isn't empty\n  console.log(x.a);\n}\n"})})]})}function h(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},6599(e){e.exports=JSON.parse('{"permalink":"/2023.02.04-github-graphql-commit-history-with-typescript","source":"@site/blog/2023-02-04-blog.md","title":"TypeScript type guard for empty JSON object","description":"Safely type through an object\'s type which includes an empty JSON object.","date":"2023-02-04T00:00:00.000Z","tags":[{"inline":true,"label":"TypeScript","permalink":"/tags/type-script"},{"inline":true,"label":"type guard","permalink":"/tags/type-guard"},{"inline":true,"label":"GitHub","permalink":"/tags/git-hub"},{"inline":true,"label":"GraphQL","permalink":"/tags/graph-ql"}],"readingTime":0.92,"hasTruncateMarker":false,"authors":[],"frontMatter":{"slug":"/2023.02.04-github-graphql-commit-history-with-typescript","canonical_url":"https://dfberry.github.io/blog/2023.02.04-github-graphql-commit-history-with-typescript","custom_edit_url":null,"sidebar_label":"2023.02.04 TS + GitHub GraphQL Commit history","title":"TypeScript type guard for empty JSON object","description":"Safely type through an object\'s type which includes an empty JSON object.","published":true,"tags":["TypeScript","type guard","GitHub","GraphQL"],"updated":"2023-02-04 06:21 PST"},"unlisted":false,"prevItem":{"title":"Azure Cloud Shell Frequently asked questions","permalink":"/2023-02-09-azure-cloud-shell-faq"}}')},8453(e,t,r){r.d(t,{R:()=>a,x:()=>s});var i=r(6540);const n={},o=i.createContext(n);function a(e){const t=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:a(e.components),i.createElement(o.Provider,{value:t},e.children)}}}]);